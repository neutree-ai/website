---
// Features section - Core capabilities and technical advantages
const features = [
  {
    icon: "chip" as const,
    title: "Heterogeneous Accelerator Support",
    description: [
      "Deploy across NVIDIA GPU, AMD GPU, and Intel XPU with a unified runtime.",
      "Models and APIs stay the same — hardware becomes a flexible choice, not a constraint.",
    ],
    imageClear: "/images/1-heter-clear.png",
    imageDither: "/images/1-heter-dither.png",
  },
  {
    icon: "layers" as const,
    title: "Flexible Private Deployment",
    description: [
      "Run models on bare metal, VMs, or containers within your own environment.",
      "No external dependency or cloud lock-in — your infrastructure defines the boundary.",
    ],
    imageClear: "/images/2-flexible-clear.png",
    imageDither: "/images/2-flexible-dither.png",
  },
  {
    icon: "shield" as const,
    title: "Stability & Performance",
    description: [
      "Production-grade LLM serving with high availability and rolling upgrades.",
      "KV-cache aware routing and elastic scaling ensure consistent low latency under real workloads.",
    ],
    imageClear: "/images/3-stability-clear.png",
    imageDither: "/images/3-stability-dither.png",
  },
  {
    icon: "building" as const,
    title: "Enterprise-grade Features",
    description: [
      "Built for organizations that need governance, visibility, and control.",
      "Multi-tenancy, usage-based accounting, and fine-grained access policies included by design.",
    ],
    imageClear: "/images/4-enterprise-clear.png",
    imageDither: "/images/4-enterprise-dither.png",
  },
  {
    icon: "code" as const,
    title: "Easy to Operate & Integrate",
    description: [
      "Works with mainstream inference engines and models.",
      "Unified APIs and pre-validated model catalog reduce integration friction and operational overhead.",
    ],
    imageClear: "/images/5-easy-clear.png",
    imageDither: "/images/5-easy-dither.png",
  },
  {
    icon: "code" as const,
    title: "Open Source & Community",
    description: [
      "Fully open source and actively developed in the open.",
      "Transparent roadmap, collaborative ecosystem, and vendor-independent evolution.",
    ],
    imageClear: "/images/6-open-clear.png",
    imageDither: "/images/6-open-dither.png",
  },
];

---

<section class="features" id="features">
  <div class="container">
    <div class="features-header">
      <h2 class="section-title">Why Neutree</h2>
      <p class="section-description">
        Built on modern architecture<br />
        with enterprise-grade reliability<br />
        and operational excellence.
      </p>
    </div>

    <div class="features-grid">
      {
        features.map((feature) => (
          <div class="feature-card">
            <div class="feature-content">
              <h3 class="feature-title">{feature.title}</h3>
              {Array.isArray(feature.description) ? (
                feature.description.map((sentence) => (
                  <p class="feature-description">{sentence}</p>
                ))
              ) : (
                <p class="feature-description">{feature.description}</p>
              )}
            </div>
            {feature.imageClear && (
              <div class="feature-image">
                <div 
                  class="feature-image-clear"
                  style={`background-image: url(${feature.imageClear})`}
                ></div>
                {feature.imageDither && feature.imageDither !== feature.imageClear && (
                  <div 
                    class="feature-image-dither"
                    style={`background-image: url(${feature.imageDither})`}
                  ></div>
                )}
              </div>
            )}
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .features {
    padding: 0 var(--padding-horizontal-desktop);

  }

  .container {
    max-width: var(--max-width-content);
    margin: 0 auto;
    border: 1px solid var(--color-border);
  }

  .features-header {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: var(--spacing-xs);
    padding: var(--spacing-lg) var(--spacing-xl);
    margin-bottom: 0;
    border-bottom: 1px solid var(--color-border);
    background-color: var(--color-bg);
    height: 16rem;
  }

  .section-title {
    font-family: var(--font-sans);
    font-size: var(--font-size-section-subtitle);
    font-weight: 600;
    line-height: var(--line-height-normal);
    letter-spacing: var(--letter-spacing-tight);
    color: var(--color-text-tertiary);
    margin: 0;
  }

  .section-description {
    font-family: var(--font-sans);
    font-size: var(--font-size-section-title);
    font-weight: 600;
    line-height: var(--line-height-normal);
    letter-spacing: var(--letter-spacing-tight);
    color: var(--color-text-primary);
    margin: 0;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0;
  }

  .feature-card {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: var(--spacing-lg) var(--spacing-xl);
    background-color: var(--color-bg);
    border: 1px solid var(--color-border);
    border-top: none;
    transition: all 0.3s ease;
    overflow: hidden;
  }

  .feature-content {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: var(--spacing-md);
  }

  /* First column (1, 4, 7...) - remove left border */
  .feature-card:nth-child(3n+1) {
    border-left: none;
  }

  /* Third column (3, 6, 9...) - remove right border */
  .feature-card:nth-child(3n) {
    border-right: none;
  }

  /* Last row - remove bottom border */
  .feature-card:nth-last-child(-n+3) {
    border-bottom: none;
  }

  .feature-card:hover {
    background-color: var(--color-bg-subtle);
  }

  .feature-image {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    margin-top: auto;
    z-index: 1;
    overflow: hidden;
  }

  .feature-image-clear,
  .feature-image-dither {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: opacity 0.4s ease-in-out;
  }

  .feature-image-clear {
    opacity: 0;
  }

  .feature-image-dither {
    opacity: 1;
  }

  .feature-card:hover .feature-image-clear {
    opacity: 1;
  }

  .feature-card:hover .feature-image-dither {
    opacity: 0;
  }

  .feature-icon {
    display: none;
  }

  .feature-title {
    font-family: var(--font-mono);
    font-size: var(--font-size-feature-title);
    font-weight: 500;
    line-height: var(--line-height-normal);
    letter-spacing: var(--letter-spacing-tighter);
    color: var(--color-text-primary);
    margin: 0;
  }

  .feature-description {
    font-family: var(--font-mono);
    font-size: var(--font-size-feature-desc);
    font-weight: 400;
    line-height: var(--line-height-normal);
    letter-spacing: var(--letter-spacing-tighter);
    color: var(--color-text-secondary);
    margin: 0;
  }

  /* Tablet Responsive */
  @media (max-width: 1279px) {
    .features {
      padding: 0 var(--padding-horizontal-tablet);
    }

    .features-header {
      padding: var(--spacing-md) var(--spacing-lg);
    }

    .feature-card {
      padding: var(--spacing-md) var(--spacing-lg);
    }
  }

  /* Mobile Responsive */
  @media (max-width: 767px) {
    .features {
      padding: 0 var(--padding-horizontal-mobile);
    }

    .features-header {
      padding: var(--spacing-md);
    }

    .features-grid {
      grid-template-columns: 1fr;
    }

    .feature-card {
      padding: var(--spacing-md);
      border-right: none;
      border-left: none;
    }

    .feature-card:last-child {
      border-bottom: none;
    }
  }
</style>
